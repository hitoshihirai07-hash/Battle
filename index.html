<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>BDC — Battle Damage Calc</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header id="topbar">
    <div id="timer">
      <button id="timer-start">▶</button>
      <button id="timer-pause">⏸</button>
      <button id="timer-reset">⟲</button>
      <input id="timer-min" type="number" min="1" max="120" value="20" aria-label="分">
      <span id="timer-readout">20:00</span>
    </div>
    <div id="loaders">
      <button id="btn-load-moves">技CSV</button><input id="file-moves" type="file" accept=".csv,text/csv" hidden>
      <button id="btn-load-pokes">図鑑JSON</button><input id="file-pokes" type="file" accept=".json,application/json" hidden>
      <button id="btn-load-oppteam">相手チームJSON</button><input id="file-oppteam" type="file" accept=".json,application/json" hidden>
      <span id="load-msg">未読込</span>
    </div>
  </header>

  <nav id="tabs">
    <button class="tab-btn active" data-tab="#tab-party">パーティ</button>
    <button class="tab-btn" data-tab="#tab-six">6×6</button>
    <button class="tab-btn" data-tab="#tab-speed">素早さライン</button>
  </nav>

  <main>
    <section id="tab-party" class="tab active">
      <h2>パーティ</h2>
      <div class="party-two">
        <div class="party-row" id="party-top"></div>
        <div class="party-row" id="party-bottom"></div>
      </div>
      <div class="party-actions">
        <button id="party-apply-to-six">6×6へ反映（自分）</button>
      </div>
    </section>

    <section id="tab-six" class="tab">
      <h2>6×6プランナー</h2>
      <div class="six-wrap">
        <div class="six-col">
          <h3>自分（6体 / 各4技）</h3>
          <div id="six-self" class="six-list"></div>
        </div>
        <div class="six-col">
          <h3>相手（6体）</h3>
          <div id="six-opp" class="six-list"></div>
          <div class="opp-tools">
            <label>耐久プリセット
              <select id="opp-preset-template">
                <option value="H0B0">H0/B0</option>
                <option value="HB252">HB252</option>
                <option value="HD252">HD252</option>
              </select>
            </label>
          </div>
        </div>
      </div>
      <div class="six-actions">
        <button id="six-add-self">自分を1体追加</button>
        <button id="six-add-opp">相手を1体追加</button>
        <button id="matrix-recalc">マトリクス更新</button>
      </div>
      <div id="matrix"></div>
    </section>

    <section id="tab-speed" class="tab">
      <h2>素早さライン</h2>
      <div class="speed-grid">
        <div>
          <label>自分のポケモン<input id="spd-self-name" list="dl_pokemon"></label>
          <label>性格
            <select id="spd-self-nat">
              <option value="1.0">等倍</option>
              <option value="1.1">↑（最速）</option>
              <option value="0.9">↓（最遅）</option>
            </select>
          </label>
          <label>ランク
            <select id="spd-self-stage">
              <option value="-2">-2</option><option value="-1">-1</option>
              <option value="0" selected>0</option>
              <option value="1">+1</option><option value="2">+2</option>
            </select>
          </label>
          <label><input type="checkbox" id="spd-self-scarf"> スカーフ</label>
          <label>EV<input type="number" id="spd-self-ev" min="0" max="252" step="4" value="252"></label>
          <div>実数値：<span id="spd-self-val">-</span></div>
        </div>
        <div>
          <label>相手のポケモン<input id="spd-opp-name" list="dl_pokemon"></label>
          <label>性格
            <select id="spd-opp-nat">
              <option value="1.0">等倍</option>
              <option value="1.1">↑（最速）</option>
              <option value="0.9">↓（最遅）</option>
            </select>
          </label>
          <label>ランク
            <select id="spd-opp-stage">
              <option value="-2">-2</option><option value="-1">-1</option>
              <option value="0" selected>0</option>
              <option value="1">+1</option><option value="2">+2</option>
            </select>
          </label>
          <label><input type="checkbox" id="spd-opp-scarf"> スカーフ</label>
          <label>EV<input type="number" id="spd-opp-ev" min="0" max="252" step="4" value="252"></label>
          <div>実数値：<span id="spd-opp-val">-</span></div>
        </div>
      </div>
      <div class="speed-actions">
        <button id="spd-calc">閾値を計算</button>
        <div id="spd-result"></div>
      </div>
    </section>
  </main>

  <datalist id="dl_pokemon"></datalist>
  <datalist id="dl_moves"></datalist>

  <script src="app.js"></script>
</body>
</html>
